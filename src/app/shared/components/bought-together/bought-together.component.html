<section class="max-w-7xl mx-auto px-4 py-8 bg-white rounded-xl shadow-lg space-y-6">
  <h2 class="text-xl font-semibold text-gray-900">Comprados juntos habitualmente</h2>
  <div class="grid grid-cols-1 sm:grid-cols-4 gap-4 items-start">
    <ng-container *ngFor="let p of products(); let i = index">
      <div class="flex h-full flex-col items-center bg-white rounded-xl shadow p-4 space-y-3">
        <div class="w-full flex justify-between items-center text-xs text-gray-500">
          <span>SKU: {{ p.sku }}</span>
          <div class="flex items-center space-x-2">
            <button aria-label="Favorite">
              <img src="/assets/icons/heart-outline.svg" alt="Favorito" class="h-5 w-5"/>
            </button>
            <input
              type="checkbox"
              [checked]="p.selected ?? true"
              (change)="toggleSelect(i)"
              class="h-5 w-5 text-gray-500"
            />
          </div>
        </div>

        <img
          [src]="p.imageUrl"
          [alt]="p.title"
          class="h-32 object-contain"
        />

        <span class="flex items-center bg-[#D8FF00] text-black text-xs px-2 py-1 rounded-full">
          <img
            src="https://cdn.jsdelivr.net/npm/heroicons@2.0.13/20/solid/star.svg"
            alt="Estrella"
            class="h-4 w-4 mr-1"
          />
          {{ p.rating }}
        </span>

        <h3 class="text-sm text-gray-700 text-center leading-snug">
          {{ p.title }}
        </h3>

        <div class="text-center space-y-1">
          <span class="text-xs text-gray-400 line-through decoration-2 decoration-red-600">
            {{ p.originalPrice | currency:'USD':'symbol':'1.0-0' }}
          </span>
          <div class="text-lg font-semibold text-gray-900">
            {{ p.price | currency:'USD':'symbol':'1.0-0' }}
          </div>
        </div>
        <div
        *ngIf="i < products().length - 1"
        class="hidden sm:flex absolute top-1/2 right-0 transform translate-x-1/2 -translate-y-1/2"
      >
        <span class="text-2xl font-bold text-gray-400">+</span>
      </div>
      </div>

      <!-- <ng-container *ngIf="i < products().length - 1">
        <div         class="hidden sm:flex absolute top-1/2 right-0 transform translate-x-1/2 -translate-y-1/2"
>
          <span class="text-2xl font-bold text-gray-400">+</span>
        </div>
      </ng-container> -->
    </ng-container>

    <div class="bg-white h-full rounded-xl shadow p-6 flex flex-col justify-center items-start space-y-4">
      <span class="text-sm text-gray-600">Precio total:</span>
      <div class="text-2xl font-bold text-gray-900">
        {{ totalPrice() | currency:'USD':'symbol':'1.2-2' }}
      </div>
      <button class="px-6 py-3 border-2 border-gray-900 text-gray-900 rounded-lg hover:bg-gray-100 transition">
        Agregar al carrito
      </button>
    </div>
  </div>
</section>
